<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>懒加载</title>
    <style type="text/css">
        html,body,ul{margin: 0;padding: 0;}
        li{margin:10px 0;list-style: none;width: 100%;-webkit-width:100%;min-height: 100px;box-shadow: 0 0 14px blue;}
        li:not(:first-child):not(:last-child){margin: 14px 0;}
        li img{display: block;width:100%;}
        .container{width: 300px; margin: 0 auto;}
        

    </style>
</head>
<body>
<div class="container" id="container">
    <ul>
        <li><img data-src="./image/1.jpg" class="image"></li>
        <li><img data-src="./image/2.jpg" width="100%"></li>
        <li><img data-src="./image/3.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/4.jpg" width="100%"></li>
        <li><img data-src="./image/5.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/6.jpg" width="100%"></li>
        <li><img data-src="./image/8.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/9.jpg" width="100%"></li>
        <li><img data-src="./image/10.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/11.jpg" width="100%"></li>
    </ul>
</div>
<!-- <div>
    <ul>
        <li><img data-src="./image/1.jpg" width="100%" class="image"></li>
        <li><img data-src="./image/2.jpg" width="100%"></li>
        <li><img data-src="./image/3.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/4.jpg" width="100%"></li>
        <li><img data-src="./image/5.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/6.jpg" width="100%"></li>
        <li><img data-src="./image/8.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/9.jpg" width="100%"></li>
        <li><img data-src="./image/10.jpg" width="100%"class="image"></li>
        <li><img data-src="./image/11.jpg" width="100%"></li>
    </ul>
</div> -->
<script src="./lazyImg.js"></script>
<script type="text/javascript">
    console.log(lazyImg({
        //container: 'container',
        placeholder: './image/0.jpg',
        //event:'click',
        effect:'scale'
    }));
    /*function Lazy(){
        this.img = [];
        this.height; //视口高度
        this.beforeView = 10; //在视口之前10px加载
    }
    Lazy.prototype = {

        //下载图片
        loadImg: function() {
            this.img = this.img.length ? this.img : document.getElementsByTagName('img');
            for(var i = 0; i < this.img.length; i++) {
                if(this.isLoad(this.img[i])) {
                    if(!this.img[i].getAttribute('data-load')) {
                        this.img[i].src = this.img[i].getAttribute('data-src');
                        this.img[i].setAttribute('data-load', 'true')
                    }
                    
                }else{
                    return;
                }
            }
        },

        //判断是否继续下载图片
        isLoad: function(ele) {
            this.height = this.height ? this.height : (window.innerHeight || document.documentElement.clientHeight);
            var sh = document.body.scrollTop || document.documentElement.scrollTop; 
            var et = ele.offsetTop; 
            var ch = et - sh - this.beforeView;

            if(ch <= this.height) {
                return true; // 继续加载
            }else{
                return false; //停止加载
            }
        }
    }

    var lazy = new Lazy();
    lazy.loadImg();

    window.onscroll = function () {
        lazy.loadImg();
    }*/
</script>
</body>
</html>